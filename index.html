<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pemendek Tautan Futuristik</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap');
        
        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff00ff;
            --dark-bg: #0f0f1a;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--dark-bg);
            color: white;
            overflow-x: hidden;
        }
        
        .title-font {
            font-family: 'Orbitron', sans-serif;
        }
        
        .neon-text {
            text-shadow: 0 0 5px var(--neon-blue), 0 0 10px var(--neon-blue);
        }
        
        .neon-box {
            box-shadow: 0 0 10px var(--neon-blue), 0 0 20px rgba(0, 243, 255, 0.3);
            border: 1px solid var(--neon-blue);
        }
        
        .neon-btn {
            transition: all 0.3s ease;
            box-shadow: 0 0 10px var(--neon-pink), 0 0 20px rgba(255, 0, 255, 0.3);
        }
        
        .neon-btn:hover {
            box-shadow: 0 0 15px var(--neon-pink), 0 0 30px rgba(255, 0, 255, 0.5);
            transform: translateY(-2px);
        }
        
        .glow {
            animation: glow 2s infinite alternate;
        }
        
        @keyframes glow {
            from {
                box-shadow: 0 0 5px var(--neon-blue), 0 0 10px rgba(0, 243, 255, 0.5);
            }
            to {
                box-shadow: 0 0 10px var(--neon-blue), 0 0 20px rgba(0, 243, 255, 0.8);
            }
        }
        
        .character-container {
            position: relative;
            width: 300px;
            height: 300px;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }
        
        .notification.show {
            opacity: 1;
        }
        
        .history-item {
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        
        .history-item:hover {
            border-left: 3px solid var(--neon-blue);
            background: rgba(0, 243, 255, 0.05);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Notification -->
    <div id="notification" class="notification">
        <div class="bg-gray-800 neon-box rounded-lg p-4 text-white max-w-xs">
            <p id="notification-message">Tautan berhasil disalin!</p>
        </div>
    </div>

    <!-- Header -->
    <header class="py-6 px-4 sm:px-6 lg:px-8">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl sm:text-3xl font-bold title-font neon-text">Short<span class="text-pink-400">Anime</span></h1>
            <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Left Column (Form) -->
            <div class="lg:w-1/2">
                <div class="bg-gray-900 bg-opacity-70 rounded-xl p-6 neon-box glow">
                    <h2 class="text-xl sm:text-2xl font-bold title-font mb-6 neon-text">Pemendek Tautan</h2>
                    
                    <div class="mb-4">
                        <label for="long-url" class="block text-sm font-medium text-gray-300 mb-2">Masukkan tautan panjang</label>
                        <input type="url" id="long-url" placeholder="https://contoh.com/tautan-panjang-sangat-panjang" 
                            class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent text-white placeholder-gray-500">
                    </div>
                    
                    <div class="mb-6">
                        <label for="service-select" class="block text-sm font-medium text-gray-300 mb-2">Pilih layanan pemendek</label>
                        <select id="service-select" class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent text-white">
                            <option value="tinyurl">TinyURL</option>
                            <option value="bitly">Bit.ly (butuh API key)</option>
                            <option value="shrtco">shrtco.de</option>
                            <option value="cleanuri">cleanuri.com</option>
                        </select>
                    </div>
                    
                    <div id="bitly-key-container" class="mb-6 hidden">
                        <label for="bitly-key" class="block text-sm font-medium text-gray-300 mb-2">Masukkan Bitly API Key</label>
                        <input type="text" id="bitly-key" placeholder="API Key Anda" 
                            class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent text-white placeholder-gray-500">
                        <p class="text-xs text-gray-400 mt-1">Dapatkan API key dari <a href="https://bitly.com/" target="_blank" class="text-blue-400 hover:underline">bitly.com</a></p>
                    </div>
                    
                    <button id="shorten-btn" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-3 px-4 rounded-lg neon-btn hover:from-blue-600 hover:to-purple-700 transition duration-300 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />
                        </svg>
                        Pendekkan Tautan
                    </button>
                </div>
                
                <!-- Result Section -->
                <div id="result-container" class="mt-6 bg-gray-900 bg-opacity-70 rounded-xl p-6 neon-box hidden">
                    <h3 class="text-lg font-bold title-font mb-4 neon-text">Tautan Pendek</h3>
                    <div class="flex flex-col sm:flex-row gap-2">
                        <input type="text" id="short-url" readonly class="flex-grow px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white truncate">
                        <button id="copy-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300 flex items-center justify-center neon-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                                <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                            </svg>
                            Salin
                        </button>
                    </div>
                </div>
                
                <!-- History Section -->
                <div class="mt-8 bg-gray-900 bg-opacity-70 rounded-xl p-6 neon-box">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold title-font neon-text">Riwayat Tautan</h3>
                        <button id="clear-history" class="text-sm text-gray-400 hover:text-white transition">Bersihkan</button>
                    </div>
                    <div id="history-list" class="space-y-2 max-h-60 overflow-y-auto">
                        <!-- History items will be added here -->
                    </div>
                </div>
            </div>
            
            <!-- Right Column (Character) -->
            <div class="lg:w-1/2 flex flex-col items-center justify-center">
                <div class="character-container mb-6">
                    <lottie-player id="anime-character" src="https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json" background="transparent" speed="1" style="width: 300px; height: 300px;" loop autoplay></lottie-player>
                </div>
                
                <div class="text-center max-w-md">
                    <h3 class="text-xl font-bold title-font mb-2 neon-text">Pendekkan Tautan Anda</h3>
                    <p class="text-gray-300">Masukkan tautan panjang Anda di atas dan kami akan memendekkannya secara instan. Hasilnya bisa disalin dan dibagikan dengan mudah!</p>
                </div>
                
                <div class="mt-8 grid grid-cols-2 sm:grid-cols-4 gap-4">
                    <div class="bg-gray-900 bg-opacity-50 rounded-lg p-4 text-center neon-box">
                        <div class="text-2xl font-bold text-blue-400">99%</div>
                        <div class="text-xs text-gray-300">Uptime</div>
                    </div>
                    <div class="bg-gray-900 bg-opacity-50 rounded-lg p-4 text-center neon-box">
                        <div class="text-2xl font-bold text-purple-400">∞</div>
                        <div class="text-xs text-gray-300">Gratis</div>
                    </div>
                    <div class="bg-gray-900 bg-opacity-50 rounded-lg p-4 text-center neon-box">
                        <div class="text-2xl font-bold text-pink-400">100+</div>
                        <div class="text-xs text-gray-300">Pengguna</div>
                    </div>
                    <div class="bg-gray-900 bg-opacity-50 rounded-lg p-4 text-center neon-box">
                        <div class="text-2xl font-bold text-green-400">1s</div>
                        <div class="text-xs text-gray-300">Cepat</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="py-6 px-4 sm:px-6 lg:px-8 bg-gray-900 bg-opacity-50 mt-8">
        <div class="container mx-auto text-center text-gray-400 text-sm">
            <p>© 2023 ShortAnime - Pemendek Tautan Futuristik. Dibuat dengan ❤️ untuk pengguna Indonesia.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const longUrlInput = document.getElementById('long-url');
            const serviceSelect = document.getElementById('service-select');
            const bitlyKeyContainer = document.getElementById('bitly-key-container');
            const shortenBtn = document.getElementById('shorten-btn');
            const resultContainer = document.getElementById('result-container');
            const shortUrlInput = document.getElementById('short-url');
            const copyBtn = document.getElementById('copy-btn');
            const historyList = document.getElementById('history-list');
            const clearHistoryBtn = document.getElementById('clear-history');
            const notification = document.getElementById('notification');
            const notificationMessage = document.getElementById('notification-message');
            const themeToggle = document.getElementById('theme-toggle');
            const animeCharacter = document.getElementById('anime-character');
            
            // Load history from localStorage
            loadHistory();
            
            // Event Listeners
            serviceSelect.addEventListener('change', function() {
                if (this.value === 'bitly') {
                    bitlyKeyContainer.classList.remove('hidden');
                } else {
                    bitlyKeyContainer.classList.add('hidden');
                }
            });
            
            shortenBtn.addEventListener('click', shortenUrl);
            copyBtn.addEventListener('click', copyToClipboard);
            clearHistoryBtn.addEventListener('click', clearHistory);
            themeToggle.addEventListener('click', toggleTheme);
            
            // Functions
            function shortenUrl() {
                const longUrl = longUrlInput.value.trim();
                const service = serviceSelect.value;
                
                if (!longUrl) {
                    showNotification('Masukkan tautan terlebih dahulu', 'error');
                    return;
                }
                
                // Validate URL
                try {
                    new URL(longUrl);
                } catch (e) {
                    showNotification('Tautan tidak valid', 'error');
                    return;
                }
                
                // Show loading state
                shortenBtn.innerHTML = '<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Memproses...';
                shortenBtn.disabled = true;
                
                // Change character animation to "working"
                animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_5tkzkblw.json');
                
                // Call appropriate API based on service
                if (service === 'tinyurl') {
                    shortenWithTinyUrl(longUrl);
                } else if (service === 'bitly') {
                    const apiKey = document.getElementById('bitly-key').value.trim();
                    if (!apiKey) {
                        showNotification('Masukkan Bitly API Key', 'error');
                        shortenBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" /></svg> Pendekkan Tautan';
                        shortenBtn.disabled = false;
                        return;
                    }
                    shortenWithBitly(longUrl, apiKey);
                } else if (service === 'shrtco') {
                    shortenWithShrtco(longUrl);
                } else if (service === 'cleanuri') {
                    shortenWithCleanuri(longUrl);
                }
            }
            
            async function shortenWithTinyUrl(longUrl) {
                try {
                    const response = await fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(longUrl)}`);
                    if (response.ok) {
                        const shortUrl = await response.text();
                        displayResult(shortUrl);
                        showNotification('Tautan berhasil dipendekkan!', 'success');
                        
                        // Change character animation to "happy"
                        animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_1efbh8.json');
                        setTimeout(() => {
                            animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
                        }, 3000);
                    } else {
                        throw new Error('Gagal memendekkan tautan');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showNotification('Gagal memendekkan tautan', 'error');
                    
                    // Change character animation to "sad"
                    animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_1c6m7cah.json');
                    setTimeout(() => {
                        animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
                    }, 3000);
                } finally {
                    shortenBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" /></svg> Pendekkan Tautan';
                    shortenBtn.disabled = false;
                }
            }
            
            async function shortenWithBitly(longUrl, apiKey) {
                try {
                    const response = await fetch('https://api-ssl.bitly.com/v4/shorten', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            long_url: longUrl,
                            domain: "bit.ly"
                        })
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        displayResult(data.link);
                        showNotification('Tautan berhasil dipendekkan!', 'success');
                        
                        // Change character animation to "happy"
                        animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_1efbh8.json');
                        setTimeout(() => {
                            animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
                        }, 3000);
                    } else {
                        throw new Error('Gagal memendekkan tautan');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showNotification('Gagal memendekkan tautan. Periksa API Key.', 'error');
                    
                    // Change character animation to "sad"
                    animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_1c6m7cah.json');
                    setTimeout(() => {
                        animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
                    }, 3000);
                } finally {
                    shortenBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" /></svg> Pendekkan Tautan';
                    shortenBtn.disabled = false;
                }
            }
            
            async function shortenWithShrtco(longUrl) {
                try {
                    const response = await fetch(`https://api.shrtco.de/v2/shorten?url=${encodeURIComponent(longUrl)}`);
                    if (response.ok) {
                        const data = await response.json();
                        displayResult(data.result.full_short_link);
                        showNotification('Tautan berhasil dipendekkan!', 'success');
                        
                        // Change character animation to "happy"
                        animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_1efbh8.json');
                        setTimeout(() => {
                            animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
                        }, 3000);
                    } else {
                        throw new Error('Gagal memendekkan tautan');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showNotification('Gagal memendekkan tautan', 'error');
                    
                    // Change character animation to "sad"
                    animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_1c6m7cah.json');
                    setTimeout(() => {
                        animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
                    }, 3000);
                } finally {
                    shortenBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" /></svg> Pendekkan Tautan';
                    shortenBtn.disabled = false;
                }
            }
            
            async function shortenWithCleanuri(longUrl) {
                try {
                    const response = await fetch('https://cleanuri.com/api/v1/shorten', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: `url=${encodeURIComponent(longUrl)}`
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        if (data.result_url) {
                            displayResult(data.result_url);
                            showNotification('Tautan berhasil dipendekkan!', 'success');
                            
                            // Change character animation to "happy"
                            animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_1efbh8.json');
                            setTimeout(() => {
                                animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
                            }, 3000);
                        } else {
                            throw new Error('Gagal memendekkan tautan');
                        }
                    } else {
                        throw new Error('Gagal memendekkan tautan');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    showNotification('Gagal memendekkan tautan', 'error');
                    
                    // Change character animation to "sad"
                    animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_1c6m7cah.json');
                    setTimeout(() => {
                        animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
                    }, 3000);
                } finally {
                    shortenBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" /></svg> Pendekkan Tautan';
                    shortenBtn.disabled = false;
                }
            }
            
            function displayResult(shortUrl) {
                shortUrlInput.value = shortUrl;
                resultContainer.classList.remove('hidden');
                
                // Add to history
                addToHistory(longUrlInput.value.trim(), shortUrl);
            }
            
            function copyToClipboard() {
                shortUrlInput.select();
                shortUrlInput.setSelectionRange(0, 99999);
                document.execCommand('copy');
                
                // Show notification
                showNotification('Tautan berhasil disalin!', 'success');
                
                // Change character animation to "copy"
                animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_gnf0qykr.json');
                setTimeout(() => {
                    animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
                }, 2000);
            }
            
            function showNotification(message, type) {
                notificationMessage.textContent = message;
                
                // Set color based on type
                if (type === 'success') {
                    notification.querySelector('div').classList.remove('bg-red-900', 'border-red-500');
                    notification.querySelector('div').classList.add('bg-green-900', 'border-green-500');
                } else if (type === 'error') {
                    notification.querySelector('div').classList.remove('bg-green-900', 'border-green-500');
                    notification.querySelector('div').classList.add('bg-red-900', 'border-red-500');
                }
                
                notification.classList.add('show');
                
                // Hide after 3 seconds
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            function addToHistory(longUrl, shortUrl) {
                // Get current history
                let history = JSON.parse(localStorage.getItem('urlHistory')) || [];
                
                // Add new item
                history.unshift({
                    longUrl: longUrl,
                    shortUrl: shortUrl,
                    timestamp: new Date().toISOString()
                });
                
                // Keep only last 10 items
                if (history.length > 10) {
                    history = history.slice(0, 10);
                }
                
                // Save to localStorage
                localStorage.setItem('urlHistory', JSON.stringify(history));
                
                // Update UI
                loadHistory();
            }
            
            function loadHistory() {
                const history = JSON.parse(localStorage.getItem('urlHistory')) || [];
                historyList.innerHTML = '';
                
                if (history.length === 0) {
                    historyList.innerHTML = '<p class="text-gray-500 text-center py-4">Belum ada riwayat</p>';
                    return;
                }
                
                history.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item bg-gray-800 rounded-lg p-3';
                    
                    historyItem.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div class="flex-1 truncate">
                                <p class="text-sm text-gray-300 truncate">${item.longUrl}</p>
                                <p class="text-xs text-blue-400 mt-1 truncate">${item.shortUrl}</p>
                            </div>
                            <button class="copy-history-btn ml-2 text-gray-400 hover:text-white" data-url="${item.shortUrl}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" />
                                    <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" />
                                </svg>
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">${new Date(item.timestamp).toLocaleString()}</p>
                    `;
                    
                    historyList.appendChild(historyItem);
                });
                
                // Add event listeners to copy buttons
                document.querySelectorAll('.copy-history-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const url = this.getAttribute('data-url');
                        navigator.clipboard.writeText(url);
                        showNotification('Tautan berhasil disalin!', 'success');
                        
                        // Change character animation to "copy"
                        animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_gnf0qykr.json');
                        setTimeout(() => {
                            animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
                        }, 2000);
                    });
                });
            }
            
            function clearHistory() {
                localStorage.removeItem('urlHistory');
                loadHistory();
                showNotification('Riwayat telah dibersihkan', 'success');
            }
            
            function toggleTheme() {
                document.documentElement.classList.toggle('dark');
                
                // Change icon based on theme
                const icon = themeToggle.querySelector('svg');
                if (document.documentElement.classList.contains('dark')) {
                    icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />';
                } else {
                    icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />';
                }
            }
            
            // Initialize character animation
            animeCharacter.addEventListener('mouseenter', function() {
                animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_1efbh8.json');
            });
            
            animeCharacter.addEventListener('mouseleave', function() {
                animeCharacter.load('https://assets1.lottiefiles.com/packages/lf20_sk5h1kfn.json');
            });
        });
    </script>
</body>
</html>